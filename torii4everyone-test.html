
<h1>みんなの鳥居のキズプロジェクト</h1>
テスト用ですので、適当にいじったり、送信してもらって大丈夫です。<br>
画像ファイルの指定はできますがアップロードは機能しません<br>
集計結果の表示機能はバグで上手く機能しません。<br>

<form>
    <p>
        神社名<br>
        <input type="text" placeholder="●●神社" id="shrine">
    </p>
    <p>
        都道府県<br>
        <input type="text" placeholder="●●県" id="pref">
    </p>
    <p>
        市町村<br>
        <input type="text" placeholder="●●市" id="city">
    </p>
    <p>
        緯度<br>
        <input type="text" placeholder="例）35.6789" id="lat">
    </p>
    <p>
        経度<br>
        <input type="text" placeholder="例）135.6789" id="lng">
    </p>
    <p>
        住所(空欄OK)<br>
        <input type="text" placeholder="●●県●●市●●町●●番地" id="addr">
    </p>
    <p>
        情報提供者(地図に表示されます。匿名や空欄もOK)<br>
        <input type="text" placeholder="鳥居太郎" id="name">
    </p>
    <p>
        調査結果画像
        <input type="file" id="resultPic" accept=".png, .jpg, .jpeg, .gif">  
    </p>
    <p>
        鳥居画像１　
        <input type="file" id="toriiPic1" accept=".png, .jpg, .jpeg, .gif">  
    </p>
    <p>
        鳥居画像２　
        <input type="file" id="toriiPic2" accept=".png, .jpg, .jpeg, .gif">  
    </p>
    <p>
        鳥居画像３　
        <input type="file" id="toriiPic3" accept=".png, .jpg, .jpeg, .gif">  
    </p>
    <p>
        鳥居画像４　
        <input type="file" id="toriiPic4" accept=".png, .jpg, .jpeg, .gif">  
    </p>
    <p>
        鳥居画像５　
        <input type="file" id="toriiPic5" accept=".png, .jpg, .jpeg, .gif">  
    </p>
    <p>
        鳥居画像６　
        <input type="file" id="toriiPic6" accept=".png, .jpg, .jpeg, .gif"> 
    </p>
</form>
<button id="b">送信</button>
<hr>
<button id="g">集計結果</button>
<div id="result"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
<script src="https://unpkg.com/gridjs/dist/gridjs.development.js"></script>

<script>
const b = document.getElementById('b')
b.addEventListener('click', () => {
const shrine = document.getElementById('shrine').value
const pref = document.getElementById('pref').value
const city = document.getElementById('city').value
const lat = document.getElementById('lat').value
const lng = document.getElementById('lng').value
const addr = document.getElementById('addr').value
const name = document.getElementById('name').value

const data = {
    shrine: shrine,
    pref: pref,
    city: city,
    lat: lat,
    lng: lng,
    addr: addr,
    name: name,
}

axios.post('https://torii4everyone.firebaseio.com/form.json', data)
    .then(res => console.log(res))
})
 
const g = document.getElementById('g')
g.addEventListener('click', () => {
  axios.get('https://torii4everyone.firebaseio.com/form.json')
    .then(res => {
      const data = Object.keys(res.data).map(key => {
        return Object.values(res.data[key]).reverse()
      })
      new gridjs.Grid({
        search: true,
        columns: ['神社名', '都道府県', '市町村', '緯度', '経度', '住所', '情報提供者'],
        data: data
      }).render(document.getElementById('result'));
    })
})

</script>
