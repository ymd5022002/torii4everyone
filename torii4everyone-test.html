
<h1>みんなの鳥居のキズプロジェクト（テスト用）</h1>

全国各地の神社の鳥居のキズの情報を皆様で持ち寄って、マッピングして災害の歴史を知るというプロジェクト。<br>
石の鳥居のキズを見かけたら記録いただき、ぜひ、情報をお寄せいただけたら幸いです。<br>
<br>
●鳥居のキズと災害の歴史・キズの記録方法<br>
　<a href="https://www.k-es.org/kawabe/examtrii/index.html" target="_blank">こちら</a><br>
●鳥居のキズの記録用紙<br>
　<a href="https://www.k-es.org/kawabe/examtrii/%E9%B3%A5%E5%B1%85%E8%AA%BF%E6%9F%BB%E3%82%AB%E3%83%BC%E3%83%89V1.1.gif" target="_blank">
gif画像</a><br>
　<a href="https://www.k-es.org/torii/%E9%B3%A5%E5%B1%85%E8%AA%BF%E6%9F%BB%E3%82%AB%E3%83%BC%E3%83%89v1.1A4%E5%8D%B0%E5%88%B7%E7%94%A8.pdf" target="_blank">
pdf(A4サイズ)</a><br>
<br>
<hr>
まだテスト用ですので、適当にいじったり、送信してもらって大丈夫です。<br>
画像ファイルの指定はできますがアップロードは機能しません<br>

<form>
    <p>
        神社名<br>
        <input type="text" placeholder="●●神社" id="shrine">
    </p>
    <p>
        都道府県<br>
        <input type="text" placeholder="●●県" id="pref">
    </p>
    <p>
        市町村<br>
        <input type="text" placeholder="●●市" id="city">
    </p>
    <p>
        緯度<br>
        <input type="text" placeholder="例）35.6789" id="lat">
    </p>
    <p>
        経度<br>
        <input type="text" placeholder="例）135.6789" id="lng">
    </p>
    <p>
        住所(空欄OK)<br>
        <input type="text" placeholder="●●県●●市●●町●●番地" id="addr">
    </p>
    <p>
        情報提供者(地図に表示されます。匿名や空欄もOK)<br>
        <input type="text" placeholder="鳥居太郎" id="name">
    </p>
    <p>
        記録用紙画像
        <input type="file" id="resultPic" accept=".png, .jpg, .jpeg, .gif">  
    </p>
    <p>
        鳥居画像１　
        <input type="file" id="toriiPic1" accept=".png, .jpg, .jpeg, .gif">  
    </p>
    <p>
        鳥居画像２　
        <input type="file" id="toriiPic2" accept=".png, .jpg, .jpeg, .gif">  
    </p>
    <p>
        鳥居画像３　
        <input type="file" id="toriiPic3" accept=".png, .jpg, .jpeg, .gif">  
    </p>
    <p>
        鳥居画像４　
        <input type="file" id="toriiPic4" accept=".png, .jpg, .jpeg, .gif">  
    </p>
    <p>
        鳥居画像５　
        <input type="file" id="toriiPic5" accept=".png, .jpg, .jpeg, .gif">  
    </p>
    <p>
        鳥居画像６　
        <input type="file" id="toriiPic6" accept=".png, .jpg, .jpeg, .gif"> 
    </p>
</form>
<button id="b">送信</button>
<hr>
<button id="g">集計結果</button>
<div id="result"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
<script src="https://unpkg.com/gridjs/dist/gridjs.development.js"></script>
<link href="https://unpkg.com/gridjs/dist/theme/mermaid.min.css" rel="stylesheet" />

<script>
const b = document.getElementById('b')
b.addEventListener('click', () => {
const shrine = document.getElementById('shrine').value
const pref = document.getElementById('pref').value
const city = document.getElementById('city').value
const lat = document.getElementById('lat').value
const lng = document.getElementById('lng').value
const addr = document.getElementById('addr').value
const name = document.getElementById('name').value

const data = {
    d70_shrine: shrine,
    d60_pref: pref,
    d50_city: city,
    d40_lat: lat,
    d30_lng: lng,
    d20_addr: addr,
    d10_name: name,
    d09_recPic: "工事中",
    d08_toriiPic1: "工事中",
}

axios.post('https://torii4everyone.firebaseio.com/form.json', data)
    .then(res => console.log(res))
})
 
const g = document.getElementById('g')
g.addEventListener('click', () => {
  axios.get('https://torii4everyone.firebaseio.com/form.json')
    .then(res => {
      const data = Object.keys(res.data).map(key => {
        return Object.values(res.data[key]).reverse()
      })
      new gridjs.Grid({
        search: true,
        columns: ['神社名', '都道府県', '市町村', '緯度', '経度', '住所', '情報提供者', '記録用紙', '鳥居画像'],
        data: data
      }).render(document.getElementById('result'));
    })
})

</script>
