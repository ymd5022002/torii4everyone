
<h1>みんなの鳥居のキズプロジェクト</h1>
<form>
<p>神社名</p>
<input type="text" placeholder="●●神社" id="shrine">
<p>都道府県</p>
<input type="text" placeholder="●●県" id="pref">
<p>市町村</p>
<input type="text" placeholder="●●市" id="city">
<p>緯度</p>
<input type="text" placeholder="35.6789" id="lat">
<p>経度</p>
<input type="text" placeholder="135.6789" id="lng">
<p>住所(空欄OK)</p>
<input type="text" placeholder="●●県●●市●●町●●番地" id="addr">
<p>調査結果画像</p>
<input type="file" id="resultPic" accept=".png, .jpg, .jpeg, .gif">  
（機能しません）作成中
<h2>鳥居画像１</h2>
作成中
<h2>鳥居画像２</h2>
作成中
<h2>鳥居画像３</h2>
作成中
<h2>鳥居画像４</h2>
作成中
<h2>鳥居画像５</h2>
作成中
<h2>鳥居画像６</h2>
作成中
</form>
<button id="b">アンケートを送信</button>
<hr>
<button id="g">集計結果を表示</button>
<div id="result"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
<script>
const b = document.getElementById('b')
b.addEventListener('click', () => {
const shrine = document.getElementById('shrine').value
const pref = document.getElementById('pref').value
const city = document.getElementById('city').value
const lat = document.getElementById('lat').value
const lng = document.getElementById('lng').value
const addr = document.getElementById('addr').value



const data = {
    shrine: shrine,
    pref: pref,
    city: city,
    lat: lat,
    lng: lng,
    addr: addr,
}


axios.post('https://torii4everyone.firebaseio.com/form.json', data)
    .then(res => console.log(res))
})

// <button id="g">get</button>
// <div id="result"></div>
 
const g = document.getElementById('g')
g.addEventListener('click', () => {
  axios.get('https://torii4everyone.firebaseio.com/form.json')
    .then(res => {
      const data = Object.keys(res.data).map(key => {
        return Object.values(res.data[key]).reverse()
      })
      new gridjs.Grid({
        search: true,
        columns: ['神社名', '都道府県', '市町村', '緯度', '経度', '住所(空欄OK)'],
        data: data
      }).render(document.getElementById('result'));
    })
})

</script>
